function isEmpty(n){return!n||0===n.length||n==="0"}function deleteQuestion(n,t){$.ajax({url:"DeleteVotingQuestion",data:{id:n,qid:t},type:"POST",datatype:"json",success:function(){location.reload()}})}function editQuestion(n){$("#modalQuestionOk").off("click").on("click",function(){saveQuestion(n.votingId,n.index)});$("#newQuestionTitle").val(n.text);$("#newQuestionDescription").val(n.description);$("#questionType").val(n.type);n.type!=="1"&&($("#minNoAnswers").val(n.minNumAnswers),$("#maxNoAnswers").val(n.maxNumAnswers),$("#minNoAnswers").parent().show(),$("#maxNoAnswers").parent().show());$("#answersTable .answerOption").not(".hide").each(function(){$(this).detach()});$.each(n.answerOptions,function(n,t){const i=$("#answersTable").find("tr.hide").clone(!0).removeClass("hide");i.addClass("answer-line");i.children("td.answerOptionText").text(t.answer);i.children("td.answerOptionDescription").text(t.description);$("#answersTable").find("table").append(i)});$("#newQuestionModal").modal()}function saveQuestion(n,t){$("#modalQuestionOk").text("Speichere...");$("#modalQuestionOk").addClass("disabled");const u=$("#newQuestionDescription").val(),f=$("#newQuestionTitle").val(),e=parseInt($("#questionType").val()),i=[],r=[];$("#answersTable .answerOption").not(".hide").each(function(){i.push($(this).find("td.answerOptionText").text());r.push($(this).find("td.answerOptionDescription").text())});const o=parseInt($("#minNoAnswers").val()),s=parseInt($("#maxNoAnswers").val());$.post({url:"UpdateVotingQuestion",data:{id:n,qid:t,title:f,desc:u,type:e,answers:i,answerDescriptions:r,minNumAnswers:o,maxNumAnswers:s},success:function(){$("#newQuestionModal").modal("hide")}})}function grantRegistration(n,t){$.post({url:"../Registration/GrantRegistration",data:{rid:n},success:function(){updateRegistrations(t)}})}function denyRegistration(n,t){$.post({url:"../Registration/DenyRegistration",data:{rid:n},success:function(){updateRegistrations(t)}})}function showCompletedRegistrations(n){const i=$("#grantedRegistrationsList");i.empty();const r=$("#deniedRegistrationsList");r.empty();let u=0,f=0;for(var t=0;t<n.length;t++){const e=n[t],o='<div class="m-0 px-3 border-bottom">'+e.voterName+"<\/div>";e.decision===1?(i.append(o),u++):(r.append(o),f++)}$("#grantedRegistrationsBadge").text(u);$("#deniedRegistrationsBadge").text(f)}function updateRegistrations(n){$.ajax({url:"../Registration/GetRegistrations",data:{votingId:n},type:"POST",datatype:"json",success:function(t){showRegistrations(t,n)}});$.ajax({url:"../Registration/GetCompletedRegistrations",data:{votingId:n},type:"POST",datatype:"json",success:function(n){showCompletedRegistrations(n)}})}function showRegistrations(n,t){$("#openRegistrationsList").removeClass("openRegistrationItem");for(let i=0;i<n.length;i++){const u=n[i];let r='<div class="d-flex mx-3 my-0 border-bottom openRegistrationItem"><div style="flex:1;margin-right:1rem">'+u.voterName+"<\/div>";r+='<div style="align-self: flex-end;cursor:pointer;color:#657f8C" onclick="grantRegistration(\''+u.registrationId+"', '"+t+'\')"><i class="material-icons">add_circle_outline<\/i><\/div>';r+='<div style="align-self: flex-end;cursor:pointer;color:#657f8C" onclick="denyRegistration(\''+u.registrationId+"', '"+t+'\')"><i class="material-icons mx-1">remove_circle_outline<\/i><\/div>';r+='<div style="align-self: flex-end;cursor:pointer;color:#657f8C"><i class="material-icons">info<\/i><\/div><\/div>';$(r).insertBefore("#openRegistrationsDivider")}$("#openRegistrationsBadge").text(n.length)}function invite(n){$.post({url:"SendInvitationMail",data:{votingId:n,addresses:["michfasch@gmx.at"]},success:function(){}})}function setupOverview(n){$(document).on("click",".dropdown-menu",function(n){n.stopPropagation()});updateRegistrations(n);$(".answerOptionText").click(function(){$(this).text()==="..."&&document.execCommand("selectAll",!1,null)});$(".answerOptionDescription").click(function(){$(this).text()==="..."&&document.execCommand("selectAll",!1,null)});$("#modalQuestionOk").off("click").on("click",function(){saveQuestion(n,0)});$(window).on("scroll",blinkOnScroll);$("#questionType").change(function(){$("#questionType").val()==="1"?($("#minNoAnswers").parent().hide(),$("#maxNoAnswers").parent().hide()):($("#minNoAnswers").parent().show(),$("#maxNoAnswers").parent().show())});$(".table-add").click(function(){const n=$("#answersTable").find("tr.hide").clone(!0).removeClass("hide table-line");n.addClass("answer-line");$("#answersTable").find("table").append(n)});$(".table-remove").click(function(){$(this).parents("tr.answer-line").detach()});$(".table-up").click(function(){const n=$(this).parents("tr");n.index()!==1&&n.prev().before(n.get(0))});$(".table-down").click(function(){const n=$(this).parents("tr");n.next().after(n.get(0))})}function blinkOnScroll(){const n=$(window).height()*1.1,t=$(window).scrollTop();$(".blinkOnScroll:not(.animated)").each(function(){var i=$(this),r=i.offset().top;t+n>r&&(i.data("timeout")?window.setTimeout(function(){i.addClass("animated blinky")},parseInt(i.data("timeout"),10)):i.addClass("animated blinky"))});$(".blinkOnScroll.animated").each(function(){const i=$(this),r=i.offset().top;t+n<r&&$(this).removeClass("animated blinky")})}function createQuestion(n){$("#newQuestionTitle").val("");$("#newQuestionDescription").val("");$("#newQuestionModal").modal();$("#modalQuestionOk").off("click").on("click",function(){saveQuestion(n,0)})}